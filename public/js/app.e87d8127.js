(function(e){function t(t){for(var r,a,l=t[0],u=t[1],o=t[2],f=0,h=[];f<l.length;f++)a=l[f],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&h.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);c&&c(t);while(h.length)h.shift()();return s.push.apply(s,o||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,l=1;l<n.length;l++){var u=n[l];0!==i[u]&&(r=!1)}r&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={app:0},s=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var o=0;o<l.length;o++)t(l[o]);var c=u;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},3868:function(e,t,n){},"3bf4":function(e,t,n){},"3fa5":function(e,t,n){"use strict";var r=n("472f"),i=n.n(r);i.a},"472f":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app"},[n("header",{staticClass:"app-header"},[n("Counter",{attrs:{value:e.orderMineCount}}),n("div",{staticClass:"app-action block",on:{click:e.restart}},[n("div",{staticClass:"face",class:e.faceClass})]),n("Counter",{attrs:{value:e.time}})],1),n("main",{staticClass:"app-container"},[n("Board",{staticClass:"app-board",attrs:{map:e.map,flag:e.flag,help:e.help,reverse:e.reverse,"error-index":e.errorIndex},on:{click:e.clickHandler,right:e.rightHandler,nears:e.nearsHandler}})],1),n("aside",{staticClass:"app-side"},[n("h2",{staticClass:"app-side-title"},[e._v("游戏规则")]),n("p",{staticClass:"app-side-content"},[e._v("经典扫雷，一款好玩有趣还能提高自己智力的小游戏，是你娱乐休闲打发时间的绝佳游戏，一起来玩吧！")]),n("h2",{staticClass:"app-side-title"},[e._v("游戏目标")]),n("p",{staticClass:"app-side-content"},[e._v("合理操作，扫除所有地雷。")]),n("h2",{staticClass:"app-side-title"},[e._v("操作指南")]),n("p",{staticClass:"app-side-content"},[e._v("鼠标左键点击，右键标注；右键可标注雷或问号，问号代表不确定。游戏左方数字代表雷数，右方数字代表时间。")]),n("button",{staticClass:"btn",on:{click:e.switchLevel}},[e._v("游戏难度："+e._s(e.gameConfig.text))])])])},s=[],a=(n("cb29"),n("4de4"),n("4160"),n("caad"),n("d81d"),n("13d5"),n("2532"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"board",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.leftDownHandler(t)},mouseup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.leftUpHandler(t)}}},e._l(e.map,(function(t,r){return n("div",{key:r,staticClass:"board-cell",class:{reverse:e.reverse.includes(r)},style:e.cellStyle,on:{mouseup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.clickHandler(r)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])?null:"button"in t&&2!==t.button?null:e.rightHandler(r)}]}},[n("div",{staticClass:"board-cell-front",class:e.blockClass(r)}),n("div",{staticClass:"board-cell-back",class:e.cellClass(r)})])})),0)}),l=[];n("fb6a"),n("a9e3"),n("c975"),n("a434");function u(e,t,n){var r=[],i=e%t,s=Math.floor(e/n),a=s>0,l=i>0,u=i<t-1,o=s<n-1;return a&&r.push(e-n),l&&r.push(e-1),u&&r.push(e+1),o&&r.push(e+n),a&&l&&r.push(e-n-1),a&&u&&r.push(e-n+1),o&&l&&r.push(e+n-1),o&&u&&r.push(e+n+1),r}function o(e,t){var n=e.indexOf(t);return-1!==n&&(e.splice(n,1),!0)}var c={name:"Board",props:{map:Array,help:Array,flag:Array,reverse:Array,errorIndex:Number},data:function(){return{previews:[]}},computed:{cellStyle:function(){var e="".concat(100/Math.sqrt(this.map.length),"%");return{width:e,height:e}}},methods:{cellClass:function(e){var t=this.map[e];if(-1!==this.errorIndex){if(this.flag.includes(e)&&-1!==t)return"mine-error";if(this.errorIndex===e)return"mine-active"}return-1===t?"mine":"bn-".concat(t)},blockClass:function(e){return this.help.includes(e)?"block-help":this.flag.includes(e)?"block-flag":this.previews.includes(e)?"bn-0":"block"},clickHandler:function(e){this.previews=[],this.$emit("click",e)},rightHandler:function(e){this.$emit("right",e)},leftDownHandler:function(e){var t=this;if(e.target===this.$el&&-1===this.errorIndex){var n=Math.sqrt(this.map.length),r=Math.floor(e.offsetX/(this.$el.offsetWidth/n)),i=Math.floor(e.offsetY/(this.$el.offsetHeight/n)),s=r+n*i;if(this.reverse.includes(s)&&!(this.map[s]<0)){var a=u(s,n,n).filter((function(e){return!t.reverse.includes(e)&&(!t.flag.includes(e)&&!t.help.includes(e))}));a.length&&(this.previews=a.slice(0),this.$el.preview=s)}}},leftUpHandler:function(){if(this.previews.length){var e=this.$el.preview;this.$emit("nears",e),this.$el.preview=null}this.previews=[]}}},f=c,h=(n("3fa5"),n("2877")),p=Object(h["a"])(f,a,l,!1,null,"8b3860f8",null),d=p.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"counter"},e._l(e.counter,(function(e,t){return n("div",{key:t,staticClass:"counter-num",class:"num-"+e})})),0)},m=[],g=(n("ac1f"),n("1276"),{name:"Counter",props:{value:Number},computed:{counter:function(){var e=String(this.value).split("").reverse();return Array(3).fill(0).map((function(t,n){return e[n]||0})).reverse()}}}),b=g,y=(n("fd84"),Object(h["a"])(b,v,m,!1,null,"55b35f76",null)),C=y.exports,k={name:"App",components:{Board:d,Counter:C},data:function(){return{map:[],flag:[],help:[],reverse:[],errorIndex:-1,isWin:!1,time:0,level:0}},computed:{mapSize:function(){return Math.sqrt(this.map.length)},mapInited:function(){return this.map.filter((function(e){return!!e})).length>0},isOver:function(){return-1!==this.errorIndex||this.isWin},orderMineCount:function(){return this.gameConfig.mineNum-this.flag.length},faceClass:function(){return this.isWin?"face-win":this.isOver?"face-fail":"face"},gameConfig:function(){var e,t,n;switch(this.level){case 3:e=22,n=99,t="困难";break;case 2:e=15,n=60,t="中级";break;case 1:e=10,n=30,t="简单";break;default:e=6,n=10,t="初级";break}return{size:e,mineNum:n,text:t}}},watch:{reverse:function(e){this.map.length-e.length===this.gameConfig.mineNum&&this.gameWin()},isOver:function(e){e&&this.timerId&&(clearInterval(this.timerId),this.timerId=null)}},mounted:function(){this.restart()},destroyed:function(){clearInterval(this.timerId)},methods:{createMap:function(e,t,n){var r=this,i=new Array(e*e).fill(0),s=[];while(s.length<t){var a=Math.ceil(Math.random()*(i.length-1));s.includes(a)||a===n||(s.push(a),i[a]=-1)}this.map=i.map((function(t,n){return-1!==t?u(n,e,e).reduce((function(e,t){return-1===i[t]?e+1:e}),0):t})),this.reverseItem(n),this.time=1,this.timerId=setInterval((function(){r.time+=1}),1e3)},reverseItem:function(e){var t=this;if(!this.isOver&&!this.reverse.includes(e)&&!this.flag.includes(e)&&!this.help.includes(e))if(this.reverse.push(e),-1!==this.map[e]){if(0===this.map[e]){var n=this.mapSize,r=u(e,n,n);r.forEach((function(e){t.reverseItem(e)}))}this.reverse.forEach((function(e){o(t.flag,e),o(t.help,e)}))}else this.gameOver(e)},clickHandler:function(e){this.isOver||(this.mapInited?this.reverseItem(e):this.createMap(this.gameConfig.size,this.gameConfig.mineNum,e))},rightHandler:function(e){this.isOver||(this.flag.includes(e)?(o(this.flag,e),this.help.push(e)):this.help.includes(e)?o(this.help,e):this.orderMineCount>0&&this.flag.push(e))},nearsHandler:function(e){var t=this;if(!this.isOver&&this.mapInited){var n=Math.sqrt(this.map.length),r=u(e,n,n),i=r.reduce((function(e,n){return t.flag.includes(n)?e+1:e}),0);this.map[e]>0&&i===this.map[e]&&r.forEach(this.reverseItem)}},gameOver:function(e){this.errorIndex=e,this.reverse=Array(this.map.length).fill(0).map((function(e,t){return t}))},gameWin:function(){this.isWin=!0},restart:function(){clearInterval(this.timerId),this.flag=[],this.help=[],this.reverse=[],this.errorIndex=-1,this.isWin=!1,this.time=0,this.map=Array(this.gameConfig.size*this.gameConfig.size)},switchLevel:function(){var e=this.level+1;e>3&&(e=0),this.level=e,this.restart()}}},w=k,O=(n("cb24"),Object(h["a"])(w,i,s,!1,null,"ee0b279a",null)),x=O.exports;n("3868");new r["a"]({render:function(e){return e(x)}}).$mount("#app"),window.oncontextmenu=function(e){return e.preventDefault()}},"72f5":function(e,t,n){},cb24:function(e,t,n){"use strict";var r=n("72f5"),i=n.n(r);i.a},fd84:function(e,t,n){"use strict";var r=n("3bf4"),i=n.n(r);i.a}});
//# sourceMappingURL=app.e87d8127.js.map