(function(t){function e(e){for(var r,s,o=e[0],c=e[1],l=e[2],f=0,h=[];f<o.length;f++)s=o[f],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(h.length)h.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(r=!1)}r&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},i={app:0},a=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0c98":function(t,e,n){"use strict";var r=n("885d"),i=n.n(r);i.a},3868:function(t,e,n){},"3bf4":function(t,e,n){},"3fa5":function(t,e,n){"use strict";var r=n("472f"),i=n.n(r);i.a},"472f":function(t,e,n){},"55a1":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=n("82ae"),a=n.n(i),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("header",{staticClass:"app-header"},[n("Counter",{attrs:{value:t.orderMineCount}}),n("div",{staticClass:"app-action block",on:{click:t.restart}},[n("div",{staticClass:"face",class:t.faceClass})]),n("Counter",{attrs:{value:t._f("time")(t.time)}})],1),n("main",{staticClass:"app-container"},[n("Board",{staticClass:"app-board",attrs:{map:t.map,flag:t.flag,help:t.help,reverse:t.reverse,"error-index":t.errorIndex},on:{click:t.clickHandler,right:t.rightHandler,nears:t.nearsHandler}})],1),n("aside",{staticClass:"app-side"},[n("h2",{staticClass:"app-side-title"},[t._v("游戏规则")]),n("p",{staticClass:"app-side-content"},[t._v("经典扫雷，一款好玩有趣还能提高自己智力的小游戏，是你娱乐休闲打发时间的绝佳游戏，一起来玩吧！")]),n("h2",{staticClass:"app-side-title"},[t._v("游戏目标")]),n("p",{staticClass:"app-side-content"},[t._v("合理操作，扫除所有地雷。")]),n("h2",{staticClass:"app-side-title"},[t._v("操作指南")]),n("p",{staticClass:"app-side-content"},[t._v("鼠标左键点击，右键标注；右键可标注雷或问号，问号代表不确定。游戏左方数字代表雷数，右方数字代表时间。")]),n("button",{staticClass:"btn",on:{click:t.switchLevel}},[t._v("游戏难度："+t._s(t.gameConfig.text))])]),n("aside",{staticClass:"app-side left"},[n("h2",{staticClass:"app-side-title"},[t._v("优质站点推荐")]),n("Flink")],1),n("Footer")],1)},o=[],c=(n("cb29"),n("4de4"),n("4160"),n("caad"),n("d81d"),n("13d5"),n("2532"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flink"},t._l(t.flinks,(function(e,r){return n("a",{key:r,staticClass:"flink-item",attrs:{target:"_blank",href:e.link,title:e.name}},[t._v(t._s(e.name))])})),0)}),l=[],u=(n("fb6a"),n("96cf"),n("1da1")),f={name:"Flink",data:function(){return{flinks:[]}},mounted:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getFlinks();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{getFlinks:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.post("/api2022");case 2:e=t.sent,n=e.data,"ok"===n.status&&(this.flinks=n.data.slice(0));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},h=f,d=(n("0c98"),n("2877")),p=Object(d["a"])(h,c,l,!1,null,"009e00ec",null),m=p.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"board",on:{mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.leftDownHandler(e)},mouseup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.leftUpHandler(e)}}},t._l(t.map,(function(e,r){return n("div",{key:r,staticClass:"board-cell",class:{reverse:t.reverse.includes(r)},style:t.cellStyle,on:{mouseup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.clickHandler(r)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])?null:"button"in e&&2!==e.button?null:t.rightHandler(r)}]}},[n("div",{staticClass:"board-cell-front",class:t.blockClass(r)}),n("div",{staticClass:"board-cell-back",class:t.cellClass(r)})])})),0)},b=[];n("a9e3"),n("c975"),n("a434");function g(t,e,n){var r=[],i=t%e,a=Math.floor(t/n),s=a>0,o=i>0,c=i<e-1,l=a<n-1;return s&&r.push(t-n),o&&r.push(t-1),c&&r.push(t+1),l&&r.push(t+n),s&&o&&r.push(t-n-1),s&&c&&r.push(t-n+1),l&&o&&r.push(t+n-1),l&&c&&r.push(t+n+1),r}function k(t,e){var n=t.indexOf(e);return-1!==n&&(t.splice(n,1),!0)}var w={name:"Board",props:{map:Array,help:Array,flag:Array,reverse:Array,errorIndex:Number},data:function(){return{previews:[]}},computed:{cellStyle:function(){var t="".concat(100/Math.sqrt(this.map.length),"%");return{width:t,height:t}}},methods:{cellClass:function(t){var e=this.map[t];if(-1!==this.errorIndex){if(this.flag.includes(t)&&-1!==e)return"mine-error";if(this.errorIndex===t)return"mine-active"}return-1===e?"mine":"bn-".concat(e)},blockClass:function(t){return this.help.includes(t)?"block-help":this.flag.includes(t)?"block-flag":this.previews.includes(t)?"bn-0":"block"},clickHandler:function(t){this.previews=[],this.$emit("click",t)},rightHandler:function(t){this.$emit("right",t)},leftDownHandler:function(t){var e=this;if(t.target===this.$el&&-1===this.errorIndex){var n=Math.sqrt(this.map.length),r=Math.floor(t.offsetX/(this.$el.offsetWidth/n)),i=Math.floor(t.offsetY/(this.$el.offsetHeight/n)),a=r+n*i;if(this.reverse.includes(a)&&!(this.map[a]<0)){var s=g(a,n,n).filter((function(t){return!e.reverse.includes(t)&&(!e.flag.includes(t)&&!e.help.includes(t))}));s.length&&(this.previews=s.slice(0),this.$el.preview=a)}}},leftUpHandler:function(){if(this.previews.length){var t=this.$el.preview;this.$emit("nears",t),this.$el.preview=null}this.previews=[]}}},C=w,y=(n("3fa5"),Object(d["a"])(C,v,b,!1,null,"8b3860f8",null)),_=y.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"counter"},t._l(t.counter,(function(t,e){return n("div",{key:e,staticClass:"counter-num",class:"num-"+t})})),0)},O=[],$=(n("ac1f"),n("1276"),{name:"Counter",props:{value:Number},computed:{counter:function(){var t=String(this.value).split("").reverse();return Array(3).fill(0).map((function(e,n){return t[n]||0})).reverse()}}}),I=$,j=(n("fd84"),Object(d["a"])(I,x,O,!1,null,"55b35f76",null)),M=j.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"footer"},[n("div",{staticClass:"footer-row"},[n("a",{attrs:{href:"javascript:;"},on:{click:t.openCodeModal}},[t._v("源码索取")]),n("a",{attrs:{href:"javascript:;"},on:{click:t.openFLModal}},[t._v("友情链接")]),n("a",{attrs:{href:"javascript:;"},on:{click:t.openAppreciate}},[t._v("请喝可乐")])]),n("div",{staticClass:"footer-row"},[n("span",[t._v("© "+t._s(t.year))]),n("a",{attrs:{href:"javascript:;"},on:{click:t.openWechatModal}},[t._v("橙续缘")]),n("a",{attrs:{href:"http://www.beian.gov.cn/",target:"_blank"}},[t._v("粤ICP备18083394号")])])])},E=[],H=(n("b0c0"),n("9911"),n("d3b7"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-mask",on:{mousedown:t.maskHandler}},[n("transition",{attrs:{"enter-active-class":"animated faster fadeInDown","leave-active-class":"animated faster fadeOutUp"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"modal",class:{focus:t.isFocus},on:{animationend:t.onAnimationEnd}},[n("div",{staticClass:"modal-header"},[n("span",{staticClass:"modal-header-title"},[t._v(t._s(t.title))]),n("a",{staticClass:"modal-header-close",attrs:{href:"javascript:;"},on:{click:t.close}},[t._v("×")])]),n("div",{staticClass:"modal-container"},[t._t("default"),t.showFooter?n("div",{staticClass:"modal-footer"},[t._t("footer")],2):t._e()],2)])])],1)}),F=[],S={name:"Modal",props:{title:String},data:function(){return{show:!1,isFocus:!0}},computed:{showFooter:function(){return this.$slots.footer&&this.$slots.footer.length}},methods:{maskHandler:function(t){this.isFocus=t.target!==this.$el},onAnimationEnd:function(){this.$emit("change",this.show)},open:function(){this.show=!0},close:function(){this.show=!1}}},q=S,L=(n("e9fd"),Object(d["a"])(q,H,F,!1,null,null,null)),R=L.exports;function W(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=document.createElement("div"),n=new r["a"]({data:function(){return Object.assign(t.data||{},{actions:(t.actions||[]).map((function(t){return Object.assign({disabled:!1,loading:function(t){var e=this,n=this.text;return this.text=t,this.disabled=!0,function(){e.text=n,e.disabled=!1}}},t)}))})},render:function(e){var r=n.actions.map((function(t){var r=t.disabled?"btn disabled":"btn",i=function(){"function"===typeof t.onClick&&t.onClick.call(n,t)};return e("button",{slot:"footer",class:r,on:{click:i}},[e("span",[t.text])])}));return e(R,{ref:"modal",attrs:{title:t.title},on:{change:n.onChange}},[t.render?t.render(e):"",r])},mounted:function(){this.open()},methods:{open:function(){this.$refs.modal.open()},close:function(){this.$refs.modal.close()},onChange:function(t){t||this.$el.remove()}}});return document.body.appendChild(e),n.$mount(e),n}var P={create:W,alert:function(t,e,n){return new Promise((function(r){W({title:e,render:function(e){return e("div",t)},actions:[{text:n||"确定",onClick:function(){this.close(),r()}}]})}))}},z=(n("6793"),{name:"Footer",data:function(){return{year:(new Date).getFullYear()}},methods:{openWechatModal:function(){P.create({title:"我的微信",render:function(t){return t("img",{attrs:{src:"/image/wechat.jpg"},style:{width:"100%"}})}})},openFLModal:function(){var t=this.$createElement;P.create({title:"申请友链",render:function(){return t("form",{class:"form"},[t("div",{class:"notice mb-20"},[t("span",["提交前请在贵站首页添加本站链接，机器人会每天检查。"])]),t("div",{class:"form-item"},[t("label",{class:"form-label"},["网站名称"]),t("input",{attrs:{name:"name",required:!0},class:"form-input"})]),t("div",{class:"form-item"},[t("label",{class:"form-label"},["网站链接"]),t("input",{attrs:{type:"url",name:"link",required:!0},class:"form-input"})])])},actions:[{text:"提交",onClick:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e){var n,r,i,s,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=document.querySelector(".form",this.$el),n.reportValidity()){t.next=3;break}return t.abrupt("return");case 3:return r=n.name.value,i=n.link.value,s=e.loading("提交中"),t.next=8,a.a.post("/api2020",{name:r,link:i});case 8:o=t.sent,c=o.data,s(),P.alert("ok"===c.status?"提交成功":c.errmsg,"ok"===c.status?"提示":"提交失败");case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{text:"取消",onClick:function(){this.close()}}]})},openCodeModal:function(){var t=this.$createElement;P.create({title:"索取源码",render:function(){return t("form",{class:"form"},[t("div",{class:"notice mb-20"},["源码会发送到你的邮箱，请注意查收。"]),t("div",{class:"form-item"},[t("label",{class:"form-label"},["邮箱"]),t("input",{attrs:{name:"email",type:"email",required:!0},class:"form-input"})])])},actions:[{text:"确定",onClick:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e){var n,r,i,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=document.querySelector(".form",this.$el),n.reportValidity()){t.next=3;break}return t.abrupt("return");case 3:return r=n.email.value,i=e.loading("提交中"),t.next=7,a.a.post("/api2021",{email:r});case 7:s=t.sent,o=s.data,i(),P.alert("ok"===o.status?"源码已发至你的邮箱，请查收！":o.errmsg,"ok"===o.status?"提示":"发送失败");case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{text:"取消",onClick:function(){this.close()}}]})},openAppreciate:function(){var t=this.$createElement,e={tab:0},n=function(){e.tab=0},r=function(){e.tab=1};P.create({data:e,title:"请喝可乐",render:function(){return t("div",{class:"apt"},[t("div",{class:"apt-tab"},[t("button",{class:0===e.tab?"btn disabled":"btn",on:{click:n}},["微信"]),t("button",{class:1===e.tab?"btn disabled":"btn",on:{click:r}},["支付宝"])]),t("img",{class:"apt-qrcode",attrs:{src:0===e.tab?"/image/wx.png":"/image/zfb.jpg"}})])}})}}}),N=z,D=(n("bcac"),Object(d["a"])(N,A,E,!1,null,"1d838244",null)),B=D.exports,T={name:"App",components:{Board:_,Counter:M,Footer:B,Flink:m},data:function(){return{map:[],flag:[],help:[],reverse:[],errorIndex:-1,isWin:!1,time:0,level:0}},computed:{mapSize:function(){return Math.sqrt(this.map.length)},mapInited:function(){return this.map.filter((function(t){return!!t})).length>0},isOver:function(){return-1!==this.errorIndex||this.isWin},orderMineCount:function(){return this.gameConfig.mineNum-this.flag.length},faceClass:function(){return this.isWin?"face-win":this.isOver?"face-fail":"face"},gameConfig:function(){var t,e,n;switch(this.level){case 2:t=22,n=100,e="高级";break;case 1:t=16,n=40,e="中级";break;default:t=9,n=10,e="初级";break}return{size:t,mineNum:n,text:e}}},watch:{reverse:function(t){this.map.length-t.length===this.gameConfig.mineNum&&this.gameWin()},isOver:function(t){t&&this.timerId&&(clearInterval(this.timerId),this.timerId=null)}},mounted:function(){this.restart()},destroyed:function(){clearInterval(this.timerId)},methods:{createMap:function(t,e,n){var r=this,i=new Array(t*t).fill(0),a=[];while(a.length<e){var s=Math.ceil(Math.random()*(i.length-1));a.includes(s)||s===n||(a.push(s),i[s]=-1)}this.map=i.map((function(e,n){return-1!==e?g(n,t,t).reduce((function(t,e){return-1===i[e]?t+1:t}),0):e})),this.reverseItem(n),this.time=1,this.timerId=setInterval((function(){r.time+=1}),1e3)},reverseItem:function(t){var e=this;if(!this.isOver&&!this.reverse.includes(t)&&!this.flag.includes(t)&&!this.help.includes(t))if(this.reverse.push(t),-1!==this.map[t]){if(0===this.map[t]){var n=this.mapSize,r=g(t,n,n);r.forEach((function(t){e.reverseItem(t)}))}this.reverse.forEach((function(t){k(e.flag,t),k(e.help,t)}))}else this.gameOver(t)},clickHandler:function(t){this.isOver||(this.mapInited?this.reverseItem(t):this.createMap(this.gameConfig.size,this.gameConfig.mineNum,t))},rightHandler:function(t){this.isOver||(this.flag.includes(t)?(k(this.flag,t),this.help.push(t)):this.help.includes(t)?k(this.help,t):this.orderMineCount>0&&this.flag.push(t))},nearsHandler:function(t){var e=this;if(!this.isOver&&this.mapInited){var n=Math.sqrt(this.map.length),r=g(t,n,n),i=r.reduce((function(t,n){return e.flag.includes(n)?t+1:t}),0);this.map[t]>0&&i===this.map[t]&&r.forEach(this.reverseItem)}},gameOver:function(t){this.errorIndex=t,this.reverse=Array(this.map.length).fill(0).map((function(t,e){return e}))},gameWin:function(){var t=this;this.isWin=!0,this.$alert("游戏胜利！！！用时：".concat(this.time,"秒"),"提示","重新开始").then((function(){return t.restart()}))},restart:function(){clearInterval(this.timerId),this.flag=[],this.help=[],this.reverse=[],this.errorIndex=-1,this.isWin=!1,this.time=0,this.map=Array(this.gameConfig.size*this.gameConfig.size)},switchLevel:function(){var t=this.level+1;t>2&&(t=0),this.level=t,this.restart()}},filters:{time:function(t){return t%1e3}}},U=T,J=(n("780f"),Object(d["a"])(U,s,o,!1,null,"9ea67b5e",null)),V=J.exports;function Y(t){var e=document.createElement("div"),n=new r["a"]({render:function(){var e=arguments[0];return e("transition",{attrs:{name:"fade"}},[e("div",{class:"msg-cover",directives:[{name:"show",value:this.show}],on:{animationend:this.onAnimationEnd}},[e("div",{class:"msg"},[t])])])},data:function(){return{show:!1}},mounted:function(){this.open()},methods:{open:function(){var t=this;this.show=!0,setTimeout((function(){t.close()}),3e3)},close:function(){this.show=!1},onAnimationEnd:function(){this.show||this.$el.remove()}}});return document.body.appendChild(e),n.$mount(e),n}n("3868"),n("90b6");r["a"].prototype.$http=a.a,r["a"].prototype.$alert=P.alert,r["a"].prototype.$Message=Y,window.$Message=Y,new r["a"]({render:function(t){return t(V)}}).$mount("#app"),window.oncontextmenu=function(t){return t.preventDefault()}},6793:function(t,e,n){},"780f":function(t,e,n){"use strict";var r=n("a896"),i=n.n(r);i.a},"885d":function(t,e,n){},a896:function(t,e,n){},bcac:function(t,e,n){"use strict";var r=n("55a1"),i=n.n(r);i.a},e1c1:function(t,e,n){},e9fd:function(t,e,n){"use strict";var r=n("e1c1"),i=n.n(r);i.a},fd84:function(t,e,n){"use strict";var r=n("3bf4"),i=n.n(r);i.a}});
//# sourceMappingURL=app.83213baa.js.map